<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Star Neon Upgrader</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { 
            --gold: #ffaa00; 
            --blue: #00f2ff; 
            --bg: #0f111a; 
            --card: #161b22; 
        }
        
        body { 
            background: var(--bg); 
            color: white; 
            font-family: 'Segoe UI', sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 20px; 
            margin: 0;
        }

        /* –ó–æ–ª–æ—Ç–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ */
        .balance-box { 
            background: var(--card); 
            padding: 15px; 
            border-radius: 15px; 
            border: 2px solid var(--gold); 
            box-shadow: 0 0 15px rgba(255, 170, 0, 0.4); 
            width: 100%; 
            text-align: center; 
            font-size: 1.4rem; 
            font-weight: bold;
            color: var(--gold);
            margin-bottom: 20px;
        }

        /* –ì–æ–ª—É–±–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è */
        .mode-switch { 
            display: flex; 
            background: #000; 
            border-radius: 25px; 
            padding: 5px; 
            border: 2px solid var(--blue);
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
            margin-bottom: 25px;
        }
        
        .mode-btn { 
            padding: 10px 25px; 
            border-radius: 20px; 
            border: none; 
            color: white; 
            background: transparent; 
            cursor: pointer; 
            transition: 0.3s;
        }
        
        .mode-btn.active { 
            background: var(--blue); 
            color: black; 
            font-weight: bold; 
            box-shadow: 0 0 10px var(--blue);
        }

        /* –ö–æ–ª–µ—Å–æ —Å –Ω–µ–æ–Ω–æ–≤–æ–π –æ–±–≤–æ–¥–∫–æ–π */
        .wheel-container { 
            position: relative; 
            width: 280px; 
            height: 280px; 
            margin-bottom: 30px; 
        }
        
        .wheel { 
            width: 100%; 
            height: 100%; 
            border-radius: 50%; 
            border: 5px solid var(--blue); 
            box-shadow: 0 0 25px rgba(0, 242, 255, 0.5);
            background: conic-gradient(#00ff88 0% 40%, #ff3333 40% 100%); 
            transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1); 
        }
        
        .pointer { 
            position: absolute; 
            top: -15px; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 0; 
            height: 0; 
            border-left: 15px solid transparent; 
            border-right: 15px solid transparent; 
            border-top: 25px solid var(--gold); 
            filter: drop-shadow(0 0 5px var(--gold));
            z-index: 10; 
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls { 
            width: 100%; 
            background: var(--card); 
            padding: 20px; 
            border-radius: 25px; 
            border: 1px solid #333;
        }

        input { 
            width: 100%; 
            background: #000; 
            border: 1px solid var(--blue); 
            color: white; 
            padding: 15px; 
            border-radius: 12px; 
            text-align: center; 
            font-size: 1.2rem; 
            margin-bottom: 15px;
            box-sizing: border-box;
        }

        .mult-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 10px; 
            margin-bottom: 20px; 
        }

        .m-btn { 
            background: #1a1f29; 
            border: 1px solid #444; 
            color: white; 
            padding: 12px 0; 
            border-radius: 10px; 
        }

        .m-btn.active { 
            border-color: var(--gold); 
            color: var(--gold);
            box-shadow: 0 0 10px rgba(255, 170, 0, 0.3);
        }

        /* –ö–Ω–æ–ø–∫–∞ –ö–†–£–¢–ò–¢–¨ - –ó–æ–ª–æ—Ç–∞—è */
        .main-btn { 
            width: 100%; 
            background: var(--gold); 
            color: black; 
            border: none; 
            padding: 18px; 
            border-radius: 15px; 
            font-weight: bold; 
            font-size: 1.2rem; 
            box-shadow: 0 0 20px rgba(255, 170, 0, 0.5);
            cursor: pointer;
            margin-bottom: 15px;
        }

        .withdraw-btn { 
            width: 100%; 
            background: transparent; 
            color: var(--blue); 
            border: 1px solid var(--blue); 
            padding: 12px; 
            border-radius: 15px; 
            box-shadow: inset 0 0 5px rgba(0, 242, 255, 0.2);
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="balance-box">
        üí∞ <span id="balanceDisplay">1000.00</span> ‚≠êÔ∏è
    </div>

    <div class="mode-switch">
        <button id="btnDemo" class="mode-btn active" onclick="setMode('demo')">DEMO</button>
        <button id="btnReal" class="mode-btn" onclick="setMode('real')">REAL</button>
    </div>

    <div class="wheel-container">
        <div class="pointer"></div>
        <div id="wheel" class="wheel"></div>
    </div>

    <div class="controls">
        <input type="number" id="betInput" value="20">
        <div class="mult-grid">
            <button class="m-btn" onclick="setMult(1.2, 70, this)">x1.2</button>
            <button class="m-btn active" onclick="setMult(2.0, 40, this)">x2.0</button>
            <button class="m-btn" onclick="setMult(5.0, 15, this)">x5.0</button>
            <button class="m-btn" onclick="setMult(10.0, 5, this)">x10.0</button>
        </div>
        <button class="main-btn" onclick="play()">–ê–ü–ì–†–ï–ô–î</button>
        <button class="withdraw-btn" onclick="withdraw()">–í–´–í–û–î –°–†–ï–î–°–¢–í</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let mode = 'demo';
        let demoBalance = 1000;
        let rotation = 0;
        let currentMult = 2.0;
        let greenZone = 40;
        let isSpinning = false;

        function setMode(m) {
            if (isSpinning) return;
            mode = m;
            document.getElementById('btnDemo').classList.toggle('active', m === 'demo');
            document.getElementById('btnReal').classList.toggle('active', m === 'real');
            updateBalance();
        }

        function setMult(val, zone, btn) {
            if (isSpinning) return;
            currentMult = val;
            greenZone = zone;
            document.querySelectorAll('.m-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('wheel').style.background = `conic-gradient(#00ff88 0% ${greenZone}%, #ff3333 ${greenZone}% 100%)`;
        }

        function updateBalance() {
            if (mode === 'demo') {
                document.getElementById('balanceDisplay').innerText = demoBalance.toFixed(2);
            } else {
                document.getElementById('balanceDisplay').innerText = "REAL MODE";
            }
        }

        function play() {
            if (isSpinning) return;
            let bet = parseFloat(document.getElementById('betInput').value);
            if (isNaN(bet) || bet < 20) return alert("–ú–∏–Ω–∏–º—É–º 20 –∑–≤–µ–∑–¥!");

            if (mode === 'demo') {
                if (demoBalance < bet) return alert("–ú–∞–ª–æ –¥–µ–º–æ-–∑–≤–µ–∑–¥!");
                isSpinning = true;
                demoBalance -= bet;
                updateBalance();

                let win = Math.random() < 0.8; // –®–∞–Ω—Å 80% –≤ –¥–µ–º–æ
                spin(win);

                setTimeout(() => {
                    if (win) {
                        demoBalance += bet * currentMult;
                    }
                    updateBalance();
                    isSpinning = false;
                    alert(win ? "–í–´–ò–ì–†–´–®!" : "–ü–†–û–ò–ì–†–´–®");
                }, 4100);
            } else {
                tg.sendData(JSON.stringify({action: "spin_real", bet: bet}));
                tg.close();
            }
        }

        function spin(win) {
            const wheel = document.getElementById('wheel');
            let stopAngle;
            if (win) {
                stopAngle = Math.random() * (greenZone * 3.6 - 10) + 5;
            } else {
                let redStart = (greenZone * 3.6) + 10;
                stopAngle = redStart + Math.random() * (350 - redStart);
            }
            rotation += (360 * 5) - stopAngle; 
            wheel.style.transform = `rotate(${rotation}deg)`;
        }

        function withdraw() {
            tg.sendData(JSON.stringify({action: "withdraw"}));
            alert("–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞! –û–∂–∏–¥–∞–π—Ç–µ 24 —á–∞—Å–∞.");
        }
    </script>
</body>
</html>
